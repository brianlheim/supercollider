if(NOT (SC_ED EQUAL 2 OR SC_ED EQUAL 3))
    set(SC_ED 3)
endif()

if(NOT WIN32 AND SC_ED EQUAL 2)

    message(STATUS "Building with Sced for gedit 2 (UNIX)")

    install(FILES data/supercollider.lang
            DESTINATION ${CMAKE_INSTALL_DATAROOTDIR}/gtksourceview-2.0/language-specs
            COMPONENT sced
    )
    install(FILES data/sced.gedit-plugin
            DESTINATION ${CMAKE_INSTALL_LIBDIR}/gedit-2/plugins
            COMPONENT sced
    )
    install(DIRECTORY sced
            DESTINATION ${CMAKE_INSTALL_LIBDIR}/gedit-2/plugins
            COMPONENT sced
    )

elseif(NOT WIN32 AND SC_ED EQUAL 3)

    message(STATUS "Building with Sced for gedit 3 (UNIX)")

    configure_file(sced3/supercollider.plugin.in sced3/supercollider.plugin)

    install(FILES data/supercollider.lang
            DESTINATION ${CMAKE_INSTALL_DATAROOTDIR}/gtksourceview-3.0/language-specs
            COMPONENT sced
    )
    install(FILES ${CMAKE_CURRENT_BINARY_DIR}/sced3/supercollider.plugin sced3/supercollider.py
            DESTINATION ${CMAKE_INSTALL_LIBDIR}/gedit/plugins
            COMPONENT sced
    )

elseif(WIN32)

    message(STATUS "Building with Sced for gedit 2 (Windows)")
    add_subdirectory(scedwin)

endif()
